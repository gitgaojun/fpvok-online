var userModelSelect=0;var invalidPrinterInput=false;var ratingsEnabled;var availabilityEnabled;var recentSearchesInit=false;var enableAutoLoadResults=false;var disableManufDropdown=false;var isGenericPage=true;var isPBPage=false;var inkDepotPrinterHolderTemplate="";var inkDepotCMEnabled=false;var inkDepotCMPageVer;var inkDepotCMElementCat="INK_AND_TONER_ELEMENT";$(function(){inkDepotPrinterHolderTemplate=$(".inkPrinterHolder").html();if($("#adSlider").find("img").length>0){$("#adSlider").adslider({closedTransition:false,pause:5000,fadeSpeed:400})}$("#inkTonerFlyout").find("a").each(function(l){var m=$(this);var h=m.attr("href");if(h.indexOf("/catalog/inkDepot.do#manufId:")>-1){m.bind("click",function(o){o.preventDefault();var n=getAttrFromHash("manufId",h);addAttrToHash("manufId",n);populateFromHash(true);$(".overlayObj").hide();$("#inkNav").removeClass("sfhover")})}});if("true"==$("#disableManufDropdown").val()){if(window.location.hash.length<=0){window.location.hash="#manufId:100686/"}$("#manufSelect").attr("disabled","disabled");disableManufDropdown=true}var d="SHOP:STF:INKDPT";if($("#pBPage").exists()){isGenericPage=false;isPBPage=true;inkDepotCMPageVer=d+"PB: "}else{inkDepotCMPageVer=d+":"}inkDepotCMEnabled=$("#coreMetricsEnabled").exists();ratingsEnabled=$("#bvPath").html()!="";availabilityEnabled=$("#displayBasicAvailabilityInfo").exists();$(".backToTop > a").live("click",function(){$("html, body").animate({scrollTop:0},500)});$(".printerNameLink, .renameLink","#userPrinterList").live("click",function(h){h.preventDefault();displayEditPrinter($(this))});$("#userPrinterList2 .printerNameLink").live("click",function(h){h.preventDefault();displayEditPrinter($(this))});$("#inkClearButton").click(function(h){h.preventDefault();clearResults();if(!disableManufDropdown){$("#manufSelect").attr("selectedIndex",0);$("#typeSelect").children("option:not(:first)").remove();$("#typeSelect").addClass("inkDisabled");$("#modelSelect").children("option:not(:first)").remove();$("#modelSelect").addClass("inkDisabled")}else{$("#typeSelect").attr("selectedIndex",0);$("#modelSelect").attr("selectedIndex",0)}if(inkDepotCMEnabled){var l=inkDepotCMPageVer+"LK:CLEARDDFINDER";cmCreatePageElementTag(l,inkDepotCMElementCat)}});$("#inkPrinterLogin").click(function(h){if(inkDepotCMEnabled){var l=inkDepotCMPageVer+"LK:LOGIN";cmCreatePageElementTag(l,inkDepotCMElementCat)}});$("#inkPrinterNewCust").click(function(h){if(inkDepotCMEnabled){var l=inkDepotCMPageVer+"LK:REGISTER";cmCreatePageElementTag(l,inkDepotCMElementCat)}});$("#userSearches .removeLink").live("click",function(m){m.preventDefault();var l=$(this).closest("li").attr("class");var h=l.replace(/.*li([\d]*)[\s|"|']+.*/,"$1");getPrinterFromCookie(h,true);$(this).closest("li").remove()});function b(m){var l=m.split("name:");var h=m;if(m.indexOf("/~~FF")==0){return""}else{return l[0]}}$(".inkSect","#inkpredictSearchFlyout").click(function(h){$("#inkPrinter").show();$(".cartSect","#inkpredictSearchFlyout").addClass("radio_off");$(this).removeClass("radio_off");$("#inkcartridge").hide();$("#printCartridge").val("printer")});$(".cartSect","#inkpredictSearchFlyout").click(function(h){$("#inkcartridge").show();$(".inkSect","#inkpredictSearchFlyout").addClass("radio_off");$(this).removeClass("radio_off");$("#inkPrinter").hide();$("#printCartridge").val("cartridge")});$("#userSearches .goLink").live("click",function(p){p.preventDefault();var n=$(this).closest("li").attr("class");var l=n.replace(/.*li([\d]*)[\s|"|']+.*/,"$1");var h=getPrinterFromCookie(l,false);var o=b(h);if((o!=null)&&(o.length>0)){window.location.hash=o;clearResults();ajaxStarted();populateFromHash(true);return}var m=$(this).prev("span").text();$("form#inkFFSearch :input[name=keyword]").val(m);$("form#inkFFSearch").submit()});$(".removeLink","#userPrinterList").live("click",function(l){l.preventDefault();var h=$(this).closest(".renameRemove").children(".removePrinterId").html();$.getJSON(od_utils.appendSessionId("/mobile/managePrinter.do?action=delete&printerId="+h),function(m){});$(this).closest(".displayPrinterRow").remove();if(!$(".firstRow","#userPrinterList").exists()){$(".displayPrinterRow:first","#userPrinterList").addClass("firstRow")}if(!$(".displayPrinterRow","#userPrinterList").exists()){od_uielements.hideAll();$(".editPrinters, #savedPrinters").hide()}dhtmlDataSync()});$("input[name=printerName]","#userPrinterList").live("keyup",function(h){if(h.keyCode==13){$(this).closest(".updatePrinter").find(".saveNameLink").click()}});$(".saveNameLink","#userPrinterList").live("click",function(n){n.preventDefault();$(".printerNameError").hide();var l=$(this).closest(".updatePrinter");var h=l.find("input[name=printerName]").val();var m=l.find("input[name=printerId]").val();if(checkDupPrinterName(h)){l.closest(".displayPrinterRow").find(".editDuplicateNameMsg").show();invalidPrinterInput=true;return}$.getJSON(od_utils.appendSessionId("/mobile/managePrinter.do?action=update&printerId="+m+"&printerName="+h),function(o){if(o.errorCode==""){dhtmlDataSync();displayPrinterList()}else{l.closest(".displayPrinterRow").find(".printerNameError").show();invalidPrinterInput=true}})});$("#savePrinterLink").click(function(h){if(inkDepotCMEnabled){cmCreateManualLinkClickTag("#","savePrinterLink")}h.preventDefault();od_uielements.hideAll();$("#invalidCharsMsg").hide();$("#duplicateNameMsg").hide();$("#overPrinterLimitMsg").hide();$(".inBannerSubHeading","#savePrinterContent").show();$("#newPrinterName").show();$("#addPrinterSubmit").show();showSavePrinterInput();$.getJSON(od_utils.appendSessionId("/mobile/managePrinter.do?action=printerList"),function(l){var m=l.userPrinterInfo.length;if(m>=10){$("#overPrinterLimitMsg").show();$(".inBannerSubHeading","#savePrinterContent").hide();$("#newPrinterName").hide();$("#addPrinterSubmit").hide()}})});$("#closePrinter").click(function(h){$("#selectedPrinter").toggle()});$(".overlayObj","#savePrinter, #editPrintersLink").bgiframe();$(".ajaxWait").bgiframe();$("#EditSavedButton, #managePrintersButton").click(function(l){if(inkDepotCMEnabled){cmCreateManualLinkClickTag("#","EditSavedButton")}l.preventDefault();od_uielements.hideAll();if(invalidPrinterInput==true){invalidPrinterInput=false;dhtmlDataSync();displayPrinterList()}$manageOverlay=$(".overlayObj","#editPrintersLink");$manageOverlay.toggle();var h=$manageOverlay.offset().top-$(window).height()+$manageOverlay.height();if(h>$(window).scrollTop()){$(window).scrollTop(h)}});$("#newPrinterName").keyup(function(h){if(h.keyCode==13){$("#addPrinterSubmit").click()}});$("#printerInfoLink").click(function(h){h.preventDefault();showPrinter()});$("#addPrinterSubmit").click(function(n){var h=$("#newPrinterName").val();var l=$("#selectedPrinterSku").val();var m="";if(h==""){return}if(checkDupPrinterName(h)){$("#duplicateNameMsg").show();$(".inBannerSubHeading","#savePrinter").hide();$("#newPrinterName").focus();$("#newPrinterName").val("");return}if(window.location.hash.length>0){m=window.location.hash}else{m=getHashStringFromCookie()}$.getJSON(od_utils.appendSessionId("/mobile/managePrinter.do?action=add&printerName="+h+"&uri="+escape(m)+"&printerSKU="+l),function(o){if(o.errorCode==""){if(!$(".displayPrinterRow","#userPrinterList").exists()){$(".editPrinters, #savedPrinters").show()}$(".overlayObj","#savePrinter").hide();dhtmlDataSync()}else{$("#invalidCharsMsg").show();$(".inBannerSubHeading","#savePrinter").hide();$("#newPrinterName").focus()}$("#newPrinterName").val("")})});$("#printersSelect").click(function(){od_uielements.hideAll()});$("#savedPrinterBtn").click(function(){if(inkDepotCMEnabled){cmCreateManualLinkClickTag("#","savedPrinterBtn")}var h=$("#printersSelect").val();if(!isNonEmptyString(h)){return}var m=getSkuFromPrinterVal(h);if(inkDepotCMEnabled){var l=inkDepotCMPageVer+"DD:MYPR["+$("#printersSelect option:selected").text()+"]";if(l.length>50){l=l.substring(0,49)}cmCreatePageElementTag(l,inkDepotCMElementCat)}window.location.hash=getHashFromPrinterVal(h);populateFromHash(true);$("#savePrinterLink").hide()});$("#manufSelect").change(function(l){l.preventDefault();disableButton("#inkSearchBtn");var h=$(this).val();if(!isNonEmptyString(h)){return}ajaxStarted();clearResults();addAttrToHash("manufId",h);populateTypesModels(h,0,0,false);if(inkDepotCMEnabled){var n=$("#manufSelect :selected").text();var m=inkDepotCMPageVer+"DD:BRAND["+n+"]";cmCreatePageElementTag(m,inkDepotCMElementCat)}});$("#typeSelect").change(function(n){var m=$("#typeSelect").val();if(!isNonEmptyString(m)){return}n.preventDefault();ajaxStarted();clearResults();var l=$("#manufSelect").val();addAttrToHash("typeId",m);$.getJSON(od_utils.appendSessionId("/mobile/inkAndTonerModelSearch.do?brandId="+l+"&typeId="+m),function(p){populateModels(p.models,0,false);ajaxEnded("typeSelect")});if(inkDepotCMEnabled){var h=$("#typeSelect :selected").text();var o=inkDepotCMPageVer+"DD:TYPE["+h+"]";cmCreatePageElementTag(o,inkDepotCMElementCat)}});$("#inkFFSearch").submit(function(l){var h=$("form#inkFFSearch input[name=keyword]").val();if((h!=null)&&(h.length>0)){savePrinterToCookie(h,true)}return true});$("#modelSelect").change(function(l){if($(this).val()==""){return}enableButton("#inkSearchBtn");if(enableAutoLoadResults){$("#inkSearchBtn").click()}if(inkDepotCMEnabled){var h=$("#modelSelect :selected").text();var m=inkDepotCMPageVer+"DD:MODEL["+h+"]";cmCreatePageElementTag(m,inkDepotCMElementCat)}});$("#inkSearchBtn").click(function(h){h.preventDefault();var l=$("#modelSelect").val();if(l==""){return}this.blur();addAttrToHash("modelId",l);populateInkSkus(l);savePrinterToCookie(window.location.hash);userModelSelect=1;$("#inkSearchTerm","#inkTonerManuf").focus()});$("#recentSearchBtn").click(function(){var h=$("#recentSearchSel").val();if(h==""){return}if(inkDepotCMEnabled){var m=inkDepotCMPageVer+"BN:MYRECENTSEARCHES";cmCreatePageElementTag(m,inkDepotCMElementCat);var l=inkDepotCMPageVer+"DD:MYSH:["+$("#recentSearchSel option:selected").text()+"]";if(l.length>50){l=l.substring(0,49)}cmCreatePageElementTag(l,inkDepotCMElementCat)}window.location.hash=h;clearResults();ajaxStarted();populateFromHash(true)});$("#browseCatLink").click(function(){if(inkDepotCMEnabled){var h=inkDepotCMPageVer+"LK:BROWSECATALOG";cmCreatePageElementTag(h,inkDepotCMElementCat)}});$("#cartrOrKywdSubmit").click(function(){if(inkDepotCMEnabled){var m=inkDepotCMPageVer+"BN:FINDBYCARTRIDGENUMBER";cmCreatePageElementTag(m,inkDepotCMElementCat);if($("#printCartridge").val()=="printer"){cmCreatePageElementTag(inkDepotCMPageVer+"RD:PRINTER",inkDepotCMElementCat)}else{if($("#printCartridge").val()=="cartridge"){cmCreatePageElementTag(inkDepotCMPageVer+"RD:CARTRIDGE",inkDepotCMElementCat)}}var l=$("#inkSearchField").val();var h=inkDepotCMPageVer+"BX:SH:["+l+"]";if(h.length>50){h=h.substring(0,49)}cmCreatePageElementTag(h,inkDepotCMElementCat)}});$("#goBtn","#inkTonerManuf").parent().css("opacity",((this.value!="")?"0.5":"1"));$("#inkSearchTerm","#inkTonerManuf").keyup(function(h){$("#goBtn","#inkTonerManuf").parent().css("opacity",((this.value=="")?"0.5":"1"))});$("#goBtn","#inkTonerManuf").click(function(h){h.preventDefault();if($("#inkSearchTerm","#inkTonerManuf").val()!=""){this.form.submit()}});var c=$("#printersSelect").val();printerSku=getSkuFromPrinterVal(c);if(isNonEmptyString(printerSku)){window.location.hash=getHashFromPrinterVal(c)}if(window.location.hash.length==0){setHashFromCookie()}savePrinterIfNeeded();enableAutoLoadResults=$("#enableAutoLoadResults").val()=="true";populateFromHash(enableAutoLoadResults);dhtmlDataSync();updateSavePrinterLink();displayPrinterList();if($("body#inkTonerManuf").exists()){populateRecentSearches()}var g=$("#manufSelect > option:selected").text();if($("#inkSelectedBrand").exists()){$("#inkSelectedBrand").html(g)}var f=$(".tab_content"),a=$(".inkTabs div"),e;f.hide();$(".inkTabs div:first").addClass("tabSelected").show();f.first().show();a.click(function(){var l=$(this);a.removeClass("tabSelected");l.addClass("tabSelected");f.hide();var h=l.find("a").attr("href");$(h).show();return false});e=$(window.location.hash).closest(".tab_content").attr("id");a.find("a[href=#"+e+"]").click();$(document).ready(function(){if($("#manufSelect").val()=="Select Printer Brand"&&$("#modelSelect").val()==""&&$("#typeSelect").val()==""){$("#savePrinterLink").hide()}})});function ajaxStarted(){$(".ajaxWait").addClass("populateInkSkus");$(".inkAjax").addClass("populateInkSkus")}function ajaxEnded(){$(".ajaxWait").removeClass("populateInkSkus");$(".inkAjax").removeClass("populateInkSkus")}function checkDupPrinterName(a){if($("#printersSelect").children("option[innerHTML="+a+"]").length){return true}return false}function showSavePrinterInput(){var a=$("#printerDesc").html();if(isNonEmptyString(a)){if(a.length>30){a=a.substring(0,30)}$("#newPrinterName").val(a)}$(".overlayObj","#savePrinter").show();$("#newPrinterName").focus()}function updateSavePrinterLink(){if(!($(".accountLogin","#header").exists())){$("#savePrinterLink").attr("href","#")}}function savePrinterIfNeeded(){var a=window.location.hash.indexOf("savePrinter");if(a>0){var b=window.location.hash;b=b.substring(0,a);window.location.hash=b;savePrinterToCookie(b);$("#savePrinterLink").click()}}function setHashFromCookie(){var a=getHashStringFromCookie();if(a==null){return}if(window.location.hash.length==0){window.location.hash=a}}function clearResults(){clearInkSkus();$("#ajaxSkuResults").hide();clearPrinter();$("#savePrinterLink").hide();$("#printersSelect").val("");$(".col1, .col2","#inkTonerManuf #content").hide().removeClass("oneColumn threeColumn fourColumn");$("#searchResultsCallout").hide()}function clearInkSkus(){$(".inkSkuClone, .hSeperate","#manufBrandCont, #prvtBrandCont").remove()}function populateInkSkus(f){clearInkSkus();$("#ajaxSkuResults").hide();$("#searchResultsCallout").hide();var e=getAttrFromHash("manufId","");var d=getAttrFromHash("typeId","");var f=getAttrFromHash("modelId","");var c=$("#manufSelect :selected").text();var a=$("#modelSelect :selected").text();ajaxStarted();var b=od_utils.appendSessionId("/ajaxhtml/SkuListFragmentAction.do?source=INKDEPOT&printerModelId="+f+"&modelName="+encodeURI(a)+"&brand="+encodeURI(c)+"&"+window.location.search.substr(1));$("#ajaxSkuResults").load(b,function(){if(inkDepotCMEnabled){cmCreateElementTag(c+" "+a,"Ink and Toner Browse","-_--_--_--_--_-inkDepot_"+c)}$("#ajaxSkuResults").show();$("#savePrinterLink").show();if($("#printerSkuInfoHighlight").exists()){$(".inkPrinterHolder").html($("#printerSkuInfoHighlight").html())}else{$(".inkPrinterHolder").html(inkDepotPrinterHolderTemplate)}showCallout();$.getJSON(od_utils.appendSessionId("/mobile/managePrinter.do?action=printerInfo&brand="+c+"&modelName="+a),function(g){setPrinter(g);$(".hovertip").hoverIntent(function(l){$("#tempHoverObj").remove();var h=(l.pageX-110<0)?0:l.pageX-110;$hover_obj=$(this).children(".hoverCloudText").clone();$hover_obj.css("left",h).css("top",l.pageY+15).attr("id","tempHoverObj");$("body").append($hover_obj);$hover_obj.fadeIn()},function(){$("#tempHoverObj").fadeOut(function(){$(this).remove()})})});ajaxEnded("populateInkSkus")})}function showCallout(){var a=od_utils.getNumber($("#totalResultSize").html());if(a>0){$("#searchResultsCallout").show();if($("#manufSelect").attr("selectedIndex")!=0){$(".printerBrandLabel","#searchResultsCallout").show().html($("#manufSelect option:selected").html()+"&nbsp;")}else{$(".printerBrandLabel","#searchResultsCallout").hide()}var b=$("#typeSelect").val();if($("#typeSelect").attr("selectedIndex")!=0&&isNonEmptyString(b)){$(".printerTypeLabel","#searchResultsCallout").show().html($("#typeSelect option:selected").html()+"&nbsp;")}else{$(".printerTypeLabel","#searchResultsCallout").hide()}if($("#modelSelect").attr("selectedIndex")!=0){$(".printerModelLabel","#searchResultsCallout").show().html($("#modelSelect option:selected").html()+"&nbsp;")}else{$(".printerModelLabel","#searchResultsCallout").hide()}$(".resultCountLabel","#searchResultsCallout").html(a);if(a==1){$("#singleInkResultMsg").show();$("#multipleInkResultsMsg").hide()}else{$("#singleInkResultMsg").hide();$("#multipleInkResultsMsg").show()}}$("html, body").animate({scrollTop:$("#searchResultsCallout").offset().top-185},500)}function inkLayoutClasses(a){var b="";if(a<2){b+="firstInkRow"}return b}function populateTypesModels(c,b,d,a){$("#typeSelect").children("option:not(:first)").remove();$.getJSON(od_utils.appendSessionId("/mobile/inkAndTonerModelSearch.do?brandId="+c+"&typeId="+b),function(e){if(e.types!=null){var h=e.types.length;for(i=0;i<h;i++){var f="",g;if(b==0){for(j=0;j<e.models.length;j++){if(e.models[j].id==d&&(e.models[j].description.toLowerCase().indexOf(e.types[i].description)>=0)){f=" selected='selected'"}}}if(e.types[i].id==b){f=" selected='selected'"}g+="<option value='"+e.types[i].id+"'"+f+">"+e.types[i].description+"</option>"}}$("#typeSelect").append(g);if(h>0){$("#typeSelect").removeClass("inkDisabled")}else{$("#typeSelect").addClass("inkDisabled")}populateModels(e.models,d,a)})}function populateModels(g,f,c){$("#modelSelect").children("option:not(:first)").remove();var b=0,a=g.length,e="";for(i=0;i<a;i++){var d="";if(g[i].id==f){d=" selected='selected'"}e+="<option value='"+g[i].id+"'"+d+">"+g[i].description+"</option>"}$("#modelSelect").append(e);if(a>0){$("#modelSelect").removeClass("inkDisabled")}else{$("#modelSelect").addClass("inkDisabled")}if(!recentSearchesInit){populateRecentSearches()}ajaxEnded("manufSelect");if(f>0){enableButton("#inkSearchBtn");if(c){populateInkSkus(f);savePrinterToCookie(window.location.hash)}}}function disableButton(a){$(a).attr("disabled","disabled");$(a).closest(".b1").addClass("inkDisabled")}function enableButton(a){$(a).removeAttr("disabled");$(a).closest(".b1").removeClass("inkDisabled")}function getSkuFromPrinterVal(a){if(a==null){return null}var b=a.substring(a.indexOf("_")+1);return b}function getHashFromPrinterVal(a){var b=a.substring(0,a.indexOf("_"));return b}function getBVImgSrc(d){if(!ratingsEnabled){return}var b=$("#bvPath").html();var a=$("#bvContext").html();var c=b+"/"+a+"/"+d+"/ratings.gif";return c}function setPrinter(c){if(c.valid){$("#printerInfoLink").show();$("#printerBVImg").attr("src",getBVImgSrc(c.sku));$("#selectedPrinterBVLink").attr("href",c.link+"#reviewTab");$("#printerImage").attr("src",c.imagePath);$("#printerDesc").html(c.description);$("#selectedPrinterSku").val(c.sku)}else{if(isNonEmptyString($("#nspDescription").html())){$("#printerInfoLink").show();var b=$("#nonSkuPrinterImagePath").html();var a=$("#nspImageFileName").html();$("#printerImage").attr("src",b+a);$("#printerDesc").html($("#nspDescription").html())}else{clearPrinter()}}}function showPrinter(){$("#selectedPrinter").toggle();if(ratingsEnabled){$("#printerBVImg").show()}else{$("#printerBVImg").hide();$("#selectedPrinterBVLink").hide()}}function clearPrinter(){$("#selectedPrinter").hide();$("#searchTip").show();$("#printerBVImg").attr("src","");$("#printerBVImg").hide();$("#printerDesc").html("");$("#selectedPrinterSku").val("");$("#selectedPrinter").hide();$(".inkPrinterInfo").hide()}function displayEditPrinter(a){displayPrinterList();$container=a.closest(".displayPrinterTable");$editRow=$container.next();$editRow.show();$container.hide();$editRow.children().find(":input[type=text]").focus().select()}function displayPrinterList(){$(".updatePrinterTable").hide();$(".displayPrinterTable").show()}function populateSkuDiv(b,l,e){var g=od_utils.appendSessionId(l.link);b.children().find(".skuImg").attr("src",l.imageFileName);b.find(".skuDescription").html(l.description);b.find(".itemNumber span").html(l.sku);b.find(".main_price").html(l.sellPrice);b.find(".taxed_price").html(l.sellPriceWithTax);b.find(".inkSku").val(l.sku);b.find(".inkSku").attr("name","entryFormList["+e+"].sku");b.find(".inkInput").attr("name","entryFormList["+e+"].qty");b.find(".inkSubmit").attr("name","cmd_addCart.button.INDEX["+e+"]");b.find(".skuDescriptionLink").attr("href",g);if(!ratingsEnabled){b.find(".printerBVLink").hide()}else{var h=g+"#reviewTab";b.find(".printerBVLink").attr("href",h);b.find(".printerBVImg").attr("src",getBVImgSrc(l.sku))}if(!availabilityEnabled){b.children(".availibilityIcons").hide()}else{var a=b.children(".availibilityIcons"),c="<table>",m=$("#imgPath").html(),f=l.availabilityIconList.length,d=l.inkTonerSkuIconList.length;if(f>0||d>0){for(j=0;j<f;j++){c+="<tr><td><img src='"+m+l.availabilityIconList[j].iconSrc+"'/></td>";c+="<td>"+l.availabilityIconList[j].msg+"</td></tr>"}for(k=0;k<d;k++){c+="<tr><td colspan='2'><img src='"+m+l.inkTonerSkuIconList[k].iconSrc+"' alt='"+l.inkTonerSkuIconList[k].msg+"'/></td></tr>"}a.append(c+"</table>")}}}function populateRebateData(a,b){if(!b.rebate){return}a.find(".inkRebateTable").show();a.find(".rebateJspText").html(b.jspText);a.find(".rebateRegPrice").html(b.regPrice);if(b.numOfInstantRebates>0){a.find(".instantRebates").show();a.find(".amtOfAllInstantRebates").html(b.amtOfAllInstantRebates)}if(b.numOfMailInRebates>0){a.find(".mailInRebates").show();a.find(".amtOfAllMailInRebates").html("&nbsp;-"+b.amtOfAllMailInRebates);a.find(".numOfMailInRebates").prepend("&nbsp;"+b.numOfMailInRebates);a.find(".priceAfterRebates").prepend("&nbsp;"+b.priceAfterRebates);if(b.numOfInstantRebates>0){a.find(".instantRebateMessage").show()}}}function populateAllDropDowns(c,b,d,a){if(!isNonEmptyString(c)){return}if(!isNonEmptyString(b)){b=0}setSelected("#manufSelect",c);populateTypesModels(c,b,d,a)}function populateFromHash(a){if(window.location.hash.length==0){return}if(a){}else{return}var c=getAttrFromHash("manufId","");var b=getAttrFromHash("typeId","");var d=getAttrFromHash("modelId","");populateAllDropDowns(c,b,d,a)}function setSelectedValues(b,a,c){setSelected("#manufSelect",b);if(a!=0){setSelected("#typeSelect",a)}if(c.length!=0){setSelected("#modelSelect",c)}}function setSelected(a,b){$(a).children("option[value="+b+"]").attr("selected","true")}function dhtmlDataSync(){$.getJSON(od_utils.appendSessionId("/mobile/managePrinter.do?action=printerList"),function(b){var a="";var d="";var c=0;try{c=b.userPrinterInfo.length}catch(f){}$tempHeading=$("li:first","#userPrinterList");$("li:first","#userPrinterList").remove();$("ul","#userPrinterList").html("");if(c>0){$("#printersSelect").children("option:not(:first)").remove();for(i=0;i<c;i++){d=(b.userPrinterInfo[i].printerName.length<20)?b.userPrinterInfo[i].printerName:b.userPrinterInfo[i].printerName.substring(0,15)+"...";a+="<option value="+b.userPrinterInfo[i].uri+"_"+b.userPrinterInfo[i].printerSku+">"+b.userPrinterInfo[i].printerName+"</option>";$tempLi=$(".displayPrinterRowTemplate li").clone();$("ul","#userPrinterList").append($tempLi);try{$(".displayPrinterRow:last .removePrinterId, .displayPrinterRow:last .removePrinterId","#userPrinterList").html(b.userPrinterInfo[i].userPrinterId);$(".displayPrinterRow:last input[name=printerId]","#userPrinterList").val(b.userPrinterInfo[i].userPrinterId);$(".displayPrinterRow:last .printerNameLink","#userPrinterList").html(d);$(".displayPrinterRow:last input[name=printerName]","#userPrinterList").val(b.userPrinterInfo[i].printerName)}catch(f){}}$(".editPrinters, #savedPrinters").show();$("#EditSavedButton").show();$("#printersSelect").removeAttr("disabled")}$("ul","#userPrinterList").prepend($tempHeading);$(".displayPrinterRow:first","#userPrinterList").addClass("firstRow");$("#printersSelect").append(a)})}function getAttrFromHash(b,h){var g=false;if(!isNonEmptyString(h)){var h=window.location.hash}else{if(h.indexOf("%23")>-1){g=true}}var e=h.indexOf(b);if(e==-1){return}var f=h.substr(e);var d=f.indexOf(":")+1;var c=f.indexOf("/");var a=c-d;return f.substr(d,a)}function addAttrToHash(c,b){var a=c+":"+b+"/";if(c=="manufId"){window.location.hash="#"+a;return}var d=window.location.hash;if(d.indexOf(c)>-1){d=d.replace(new RegExp(c+":[0-9]*/"),a);if(c=="typeId"){d=d.replace(new RegExp("modelId:[0-9]*/"),"")}}else{d=d+a}window.location.hash=d}function populateRecentSearches(){var m="select";var h=false;if($("#userSearches").exists()){m="list"}if($("body#inkTonerManuf").exists()){h=true}var f=od_utils.getCookie("lastViewedPrinter");if(f==null){return}recentSearchesInit=true;if(f.indexOf("name")==-1){f=f+"name:"+getNameAttrFromDropDown()+"/";od_utils.setCookie("lastViewedPrinter",f)}var e=f.split("|");$("#recentSearchSel").removeClass("inkDisabled");$("#recentSearchSel").children().remove();$("#userSearches li.savedUserEntry").remove();var c;for(c=0;c<e.length;c++){var b="";var a=e[c];var l=a.split("name:");var d=a;if(a.indexOf("/~~FF")==0){d=l[1];d=d.substring(0,d.length-1)}else{d=decodeURI(l[1]);d=d.substring(0,d.length-1)}if(m=="select"){if(h){$("#recentSearchSel").append("<option value='"+a+"'"+b+">"+d+"</option>")}else{$("#recentSearchSel").append("<option value='"+l[0]+"'"+b+">"+d+"</option>")}}else{var g=$("<li>"+$("#userSearches li.template").html()+"</li>");g.removeClass("template");g.addClass("li"+c);g.addClass("savedUserEntry");g.find("span").text(d);$("ul#userSearches").append(g)}}enableButton("#recentSearchBtn")}function getNameAttrFromDropDown(){var c=$("#manufSelect :selected").text();var b=$("#modelSelect :selected").text();if(c=="Hewlett-Packard"){c="HP"}var a=c+" "+b;return encodeURI(a.substring(0,40))}function getPrinterFromCookie(h,g){var b=od_utils.getCookie("lastViewedPrinter");if(b==null){od_utils.setCookie("lastViewedPrinter",null);populateRecentSearches();return}var f=b.split("|");var e=new Array();var d;var a=0;for(d=0;d<f.length;d++){if(d==h){if(!g){return f[d]}}else{e[a++]=f[d]}}if(!g){return""}var c="";for(d=0;d<e.length;d++){c+=((d==0)?"":"|")+e[d]}od_utils.setCookie("lastViewedPrinter",c);populateRecentSearches()}function savePrinterToCookie(f,b,h){var p=3;if(typeof(ODINK_OVERRIDE_MAX_ARRAYLENGTH)!="undefined"){if(ODINK_OVERRIDE_MAX_ARRAYLENGTH!="undefined"){if(ODINK_OVERRIDE_MAX_ARRAYLENGTH>0){p=ODINK_OVERRIDE_MAX_ARRAYLENGTH}}}printerString="";if(b){printerString="/~~FFname:"+f+"/"}else{printerString=f+"name:"+getNameAttrFromDropDown()+"/"}var g=od_utils.getCookie("lastViewedPrinter");if(g==null){od_utils.setCookie("lastViewedPrinter",printerString);populateRecentSearches();return}var c=g.split("|");var m=getAttrFromHash("modelId",printerString);if(c.length==0){c=[g]}var d=false;var e;for(e=c.length-1;e>=0;e--){var a=c[e];if(a.indexOf("/~~FF")==0){if(a.search("/~~FFname:"+f+"/")>-1){d=true}}else{if(a.search("modelId:"+m+"/")>-1){d=true}}if(d&&e>0){c[e]=c[e-1]}}var n=printerString;var l=c.length;var o=0;if(l==p&&!d){l--}if(d){o++}for(e=o;e<l;e++){n+="|"+c[e]}od_utils.setCookie("lastViewedPrinter",n);populateRecentSearches()}function getHashStringFromCookie(){var a=od_utils.getCookie("lastViewedPrinter");if(a==null){return}a=a.replace("%23","#");var b=a.indexOf("name:");if(b==-1){return a}else{return a.substring(0,a.indexOf("name:"))}}function doInkDepotTabsCmTags(a,b){if(inkDepotCMEnabled){cmCreateManualLinkClickTag(a,b);cmCreateElementTag(b,"inkDepot tabs")}}function doInkLogoClickCmTag(a,b){if(inkDepotCMEnabled){cmCreateManualLinkClickTag(a,b)}};